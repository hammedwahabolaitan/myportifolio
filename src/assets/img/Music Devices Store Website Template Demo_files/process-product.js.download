(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"../client/editor-next/src/components/block-components/constructor/types/product/media/find-fitting-image.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.prepareImageVariants=e.getBiggestVariant=e.findFittingImage=void 0;var r=e.prepareImageVariants=t.pipe(t.keys,t.map(Number),t.filter(t.identity),t.sortBy(t.identity)),n=e.getBiggestVariant=function(t,e){var r=t.reduce(function(t,r){return t||(e>r?0:r)},0);return r?r.toString():"original"};e.findFittingImage=function(t,e){return t[n(r(t),e)]}}).call(this,r("../client/node_modules/lodash/fp.js"))},"../client/editor-next/src/components/block-components/constructor/types/product/product-list/view/index.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}});var n=function(t){return t&&t.__esModule?t:{default:t}}(r("../client/editor-next/src/components/block-components/constructor/types/product/product-list/view/storefront-products-list.js"))},"../client/editor-next/src/components/block-components/constructor/types/product/product-list/view/storefront-products-list.js":function(t,e,r){"use strict";(function(t){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r("../client/editor-next/src/components/block-components/collection/view/slider/utils.js"),i=r("../client/editor-next/src/components/block-components/ecommerce/utils/prepare-app-info.js"),c=r("../client/shared/api/ecommerce/http-common.js"),a=r("../client/editor-next/src/components/block-components/constructor/types/product/view/stock-manager.js"),s=r("../client/editor-next/src/components/block-components/constructor/types/product/view/product-previews-observer.js"),l=r("../client/editor-next/src/components/block-components/constructor/types/product/view/utils.js");function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */u=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},a=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,c=Object.create(o.prototype),a=new I(n||[]);return i(c,"_invoke",{value:_(t,r,a)}),c}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",b={};function g(){}function w(){}function j(){}var O={};f(O,a,function(){return this});var E=Object.getPrototypeOf,S=E&&E(E(M([])));S&&S!==r&&o.call(S,a)&&(O=S);var P=j.prototype=g.prototype=Object.create(O);function k(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){function r(i,c,a,s){var l=d(t[i],t,c);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==n(f)&&o.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(f).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,s)})}s(l.arg)}var c;i(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return c=c?c.then(o,o):o()}})}function _(e,r,n){var o=m;return function(i,c){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw c;return{value:t,done:!0}}for(n.method=i,n.arg=c;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===b)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var c=i.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,c=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}throw new TypeError(n(e)+" is not iterable")}return w.prototype=j,i(P,"constructor",{value:j,configurable:!0}),i(j,"constructor",{value:w,configurable:!0}),w.displayName=f(j,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,j):(t.__proto__=j,f(t,l,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},k(x.prototype),f(x.prototype,s,function(){return this}),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var c=new x(p(t,r,n,o),i);return e.isGeneratorFunction(r)?c:c.next().then(function(t){return t.done?t.value:c.next()})},k(P),f(P,l,"Generator"),f(P,a,function(){return this}),f(P,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],a=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var s=o.call(c,"catchLoc"),l=o.call(c,"finallyLoc");if(s&&l){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(s){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function f(t,e,r,n,o,i,c){try{var a=t[i](c),s=a.value}catch(t){return void r(t)}a.done?e(s):Promise.resolve(s).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function c(t){f(i,n,o,c,a,"next",t)}function a(t){f(i,n,o,c,a,"throw",t)}c(void 0)})}}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function m(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function h(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function y(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var v=new WeakSet,b=function(){return function(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){var r=e.element,n=e.appInstance,o=e.templateEngine;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,v),this.initialized=!1,this.element=r,this.appInstance=n,this.templateEngine=o,this.target=r.querySelector(".js-product-list-wrapper")},[{key:"init",value:function(){var t=p(u().mark(function t(){var e,r,n,i,c,a,l,f;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e=JSON.parse(this.element.dataset.value),r=e.categorySlugIds,n=e.showOutOfStock,i=e.perPage,c=void 0===i?100:i,a=e.sort,l=void 0===a?"name":a,t.next=6,y(v,this,g).call(this,{categorySlugIds:r,showOutOfStock:n,limit:c,sort:l});case 6:f=t.sent,(0,o.addSliderMountListener)(function(t){var e=t.querySelectorAll(".js-product-list-wrapper");e.length&&e.forEach(function(t){return s.productPreviewsObserver.observe(t.children)})}),y(v,this,j).call(this,{products:f}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.error(t.t0);case 14:return t.prev=14,this.initialized=!0,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[2,11,14,17]])}));return function(){return t.apply(this,arguments)}}()}])}();function g(t){return w.apply(this,arguments)}function w(){return(w=p(u().mark(function e(r){var n,o,f,p,d,m,h,y,v,b,g;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.categorySlugIds,o=r.showOutOfStock,f=r.limit,p=r.sort,d=(0,i.prepareAppInfo)(),m=d.appId,h=d.apiUrl,e.next=4,(0,c.loadCategories)(m,h,n);case 4:return y=e.sent,v=y.map(t.prop("id")),e.next=8,(0,c.loadCategoryProducts)(m,h,{categories:v,showOutOfStock:o,limit:f,sort:p});case 8:return b=e.sent,g=b.products,(0,s.updatePreviewsMap)(g),g.forEach(a.updateStockWithVariantsInventory),e.abrupt("return",g.map((0,l.mapProduct)({appInstance:this.appInstance})));case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function j(e){var r=e.products,n=this.element.querySelector('[data-template="products-list"]').innerHTML;if(!n)throw new Error("Template not found");this.target.innerHTML=this.templateEngine.render(n,{products:r,ribbons:t.getOr({},"meta_data.ribbons",this.appInstance)}),Array.from(this.target.children).forEach(function(t){return s.productPreviewsObserver.observe(t)})}e.default=b}).call(this,r("../client/node_modules/lodash/fp.js"))},"../client/editor-next/src/components/block-components/constructor/types/product/view/process-product.js":function(t,e,r){"use strict";(function(t){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.processProductList=e.processProduct=void 0;var o=r("../client/editor-next/src/components/block-components/collection/view/slider/utils.js"),i=r("../client/editor-next/src/components/block-components/ecommerce/utils/prepare-app-info.js"),c=r("../client/shared/api/ecommerce/http-common.js"),a=p(r("../client/editor-next/src/components/block-components/ecommerce/store-products/view/index.js")),s=r("../client/editor-next/src/components/block-components/constructor/types/product/view/stock-manager.js"),l=r("../client/editor-next/src/components/block-components/constructor/types/product/view/product-previews-observer.js"),u=p(r("../client/editor-next/src/components/block-components/constructor/types/product/product-list/view/index.js")),f=r("../client/editor-next/src/components/block-components/constructor/types/product/view/utils.js");function p(t){return t&&t.__esModule?t:{default:t}}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},a=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,c=Object.create(o.prototype),a=new I(n||[]);return i(c,"_invoke",{value:_(t,r,a)}),c}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",b={};function g(){}function w(){}function j(){}var O={};u(O,a,function(){return this});var E=Object.getPrototypeOf,S=E&&E(E(M([])));S&&S!==r&&o.call(S,a)&&(O=S);var P=j.prototype=g.prototype=Object.create(O);function k(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){function r(i,c,a,s){var l=p(t[i],t,c);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==n(f)&&o.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(f).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,s)})}s(l.arg)}var c;i(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return c=c?c.then(o,o):o()}})}function _(e,r,n){var o=m;return function(i,c){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw c;return{value:t,done:!0}}for(n.method=i,n.arg=c;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===b)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(e,r,n);if("normal"===l.type){if(o=n.done?v:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var c=i.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,c=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}throw new TypeError(n(e)+" is not iterable")}return w.prototype=j,i(P,"constructor",{value:j,configurable:!0}),i(j,"constructor",{value:w,configurable:!0}),w.displayName=u(j,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,j):(t.__proto__=j,u(t,l,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},k(x.prototype),u(x.prototype,s,function(){return this}),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var c=new x(f(t,r,n,o),i);return e.isGeneratorFunction(r)?c:c.next().then(function(t){return t.done?t.value:c.next()})},k(P),u(P,l,"Generator"),u(P,a,function(){return this}),u(P,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],a=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var s=o.call(c,"catchLoc"),l=o.call(c,"finallyLoc");if(s&&l){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(s){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach(function(e){y(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function y(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e,r,n,o,i,c){try{var a=t[i](c),s=a.value}catch(t){return void r(t)}a.done?e(s):Promise.resolve(s).then(n,o)}function b(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function c(t){v(i,n,o,c,a,"next",t)}function a(t){v(i,n,o,c,a,"throw",t)}c(void 0)})}}var g=function(t,e){var r=t.querySelector(e);return document.importNode(r.content,!0).children[0]},w=(e.processProduct=function(){var e=b(d().mark(function e(r){var n,o,a,u,p,m,y,v,b,w,j,O;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.wrapper,o=r.appInstance,a=r.templateEngine,u=(0,i.prepareAppInfo)(),p=u.appId,m=u.apiUrl,y=n.dataset.productId){e.next=5;break}return e.abrupt("return");case 5:return v=n.querySelector(".js-product-card-target-element"),e.prev=6,e.next=9,(0,c.loadProduct)(m,p,y);case 9:if(!(b=e.sent).error){e.next=12;break}throw new Error(b.error);case 12:(0,l.updatePreviewsMap)([b]),w=(0,f.mapProduct)({appInstance:o},b),(0,s.updateStockWithVariantsInventory)(w),j=g(n,".js-product-card-template"),v.innerHTML=a.render(j.outerHTML,h(h({},w),{},{ribbons:t.getOr({},"meta_data.ribbons",o)})),v.dataset.productId=y,v.dataset.variantId=w.variant.slug_id,l.productPreviewsObserver.observe(v),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(6),O=g(n,".js-product-card-error-template"),v.replaceChildren(O);case 26:case"end":return e.stop()}},e,null,[[6,22]])}));return function(t){return e.apply(this,arguments)}}(),new Map([["storefront-products-list",u.default],["store-products",a.default]]));e.processProductList=function(){var t=b(d().mark(function t(e){var r,n,o,i,c;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.type,n=e.element,o=e.appInstance,i=e.templateEngine,c=w.get(r)){t.next=4;break}return t.abrupt("return");case 4:new c({element:n,appInstance:o,templateEngine:i}).init();case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();(0,o.addSliderMountListener)(function(t){t.querySelectorAll(".js-product-card-target-element").forEach(function(t){return l.productPreviewsObserver.observe(t)})})}).call(this,r("../client/node_modules/lodash/fp.js"))},"../client/editor-next/src/components/block-components/constructor/types/product/view/product-previews-observer.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updatePreviewsMap=e.productPreviewsObserver=void 0;var n=r("../client/shared/utils/dom.js"),o=r("../client/editor-next/src/components/block-components/ecommerce/utils/generate-preview-sizes.js"),i=r("../client/editor-next/src/components/block-components/constructor/types/product/media/find-fitting-image.js"),c={rootMargin:(0,n.getDefaultRootMargin)()},a=new Map;e.updatePreviewsMap=function(t){t.forEach(function(t){var e=function(t){return t.variant.preview?t.variant.preview:t.preview?t.preview:void 0}(t);e&&a.set(t.variant.slug_id,(0,o.generatePreviewSizes)(e.url))})},e.productPreviewsObserver=new IntersectionObserver(function(t,e){t.forEach(function(t){var r=t.target;if(t.isIntersecting){e.unobserve(r);var n=r.dataset.variantId,o=r.querySelector(".js-preview-img");o&&(o.addEventListener("error",function(){o.src=o.src?o.src.replace(/\/\d+$/,"/original"):""}),o&&a.has(n)&&(o.src=(0,i.findFittingImage)(a.get(n),r.clientWidth)))}})},c)},"../client/editor-next/src/components/block-components/ecommerce/components/filters/constants.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CATEGORIES_LEVEL_INDENT=e.ALL_CATEGORY=void 0;e.CATEGORIES_LEVEL_INDENT=12,e.ALL_CATEGORY={id:"all",name:"All",slug_id:"all",level:0,sort_order:0}},"../client/editor-next/src/components/block-components/ecommerce/components/filters/filters-sidebar/utils/is-all-hidden.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=t.every(t.prop("hidden"));e.default=r}).call(this,r("../client/node_modules/lodash/fp.js"))},"../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/filter-options.js":function(t,e,r){"use strict";(function(t,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){c(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=t.curry(function(e,n){var o=e.showOutOfStock;return t.pipe(t.map(function(e){return i(i({},e),{},{values:r.when(t.always(!o),t.filter(function(t){return t.unselected_out_of_stock!==t.unselected_total}))(e.values)})}),t.filter(t.pipe(t.get("values"),t.negate(t.isEmpty))))(n)});e.default=a}).call(this,r("../client/node_modules/lodash/fp.js"),r("../client/shared/utils/lodash-extend.js"))},"../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/get-merged-options.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/merge-options.js"));function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=t.curry(function(e,r){return t.pipe(t.map(function(t){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){c(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({id:t.name},t)}),(0,n.default)(e))(r)});e.default=a}).call(this,r("../client/node_modules/lodash/fp.js"))},"../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/get-sub-categories-ids.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){return t.reduce(function(t,e){return function t(e,r){var n=e.id,o=e.children;return r.push(n),o&&o.length>0&&o.forEach(function(e){return t(e,r)}),r}(e,t)},[],e)}}).call(this,r("../client/node_modules/lodash/fp.js"))},"../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/index.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"filterOptions",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"getMergedOptions",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"getSubCategoriesIds",{enumerable:!0,get:function(){return i.default}});var n=c(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/get-merged-options.js")),o=c(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/filter-options.js")),i=c(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/get-sub-categories-ids.js"));function c(t){return t&&t.__esModule?t:{default:t}}},"../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/merge-options.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=["title","category"],n=function(e){var n=e.type;return t.includes(n,r)},o=t.curry(function(e,r){var o=t.filter(t.overSome([n,function(e){return t.some(function(r){return t.isEqual(r.name,e.name)})(r)}]))(e),i=t.filter(function(e){return!t.some(t.overEvery([t.negate(n),function(r){return t.isEqual(r.name,e.name)}]))(o)})(r);return t.pipe(t.concat,t.map(function(e){var n=t.find({name:e.name},r);return n?t.set("values",n.values,e):e}))(o,i)});e.default=o}).call(this,r("../client/node_modules/lodash/fp.js"))},"../client/editor-next/src/components/block-components/ecommerce/components/filters/view/active-filters-bar.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=c(r("../client/editor-next/src/utils/view/create-element-from-template.js")),i=c(r("../client/editor-next/src/utils/view/get-template.js"));function c(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach(function(e){l(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function l(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function p(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function d(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var m=new WeakSet,h=function(){return function(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){var r=e.wrapper,n=e.templateEngine,o=e.targetElement,i=e.onSelect;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,m),this.initialized=!1,this.wrapper=r,this.targetElement=o,this.templateEngine=n,this.template=null,this.onSelect=i},[{key:"init",value:function(){this.initialized||(this.template=(0,i.default)(this.wrapper,"active-filters-bar-wrapper"),this.itemTemplate=(0,i.default)(this.wrapper,"active-filters-bar-list-item"),this.clearAllButtonTemplate=(0,i.default)(this.wrapper,"active-filters-bar-clear-all-button"),this.initialized=!0)}},{key:"update",value:function(t){this.element||this.render(),t.checked?d(m,this,y).call(this,t):d(m,this,v).call(this,t)}},{key:"reset",value:function(){this.element instanceof HTMLElement&&(this.element.remove(),this.element=null)}},{key:"render",value:function(){var t=this;this.element=(0,o.default)({templateEngine:this.templateEngine,template:this.template}),this.clearAllButton=(0,o.default)({templateEngine:this.templateEngine,template:this.clearAllButtonTemplate}),this.clearAllButton.addEventListener("click",function(){t.onSelect({action:"reset"}),t.element.remove(),t.element=null}),this.element.append(this.clearAllButton),this.targetElement.innerHTML="",this.targetElement.append(this.element)}}])}();function y(t){var e=this;this.element||this.render();var r=(0,o.default)({templateEngine:this.templateEngine,template:this.itemTemplate,data:{name:t.name,value:t.value}});r.dataset.name=t.name,r.dataset.value=t.value,r.addEventListener("click",function(){d(m,e,v).call(e,t),e.onSelect(s(s({},t),{},{checked:!1}))}),this.clearAllButton.insertAdjacentElement("beforebegin",r)}function v(t){var e=CSS.escape(t.name),r=CSS.escape(t.value),n=this.element.querySelector('[data-name="'.concat(e,'"][data-value="').concat(r,'"]'));n&&(n.remove(),this.element.querySelector("[data-name]")||this.reset())}e.default=h},"../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/base-filter-item.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=c(r("../client/editor-next/src/utils/view/create-element-from-template.js")),i=c(r("../client/editor-next/src/utils/view/get-template.js"));function c(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function l(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function u(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var f=new WeakSet,p=function(){return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){var r=e.wrapper,n=e.type,o=e.name,i=e.templateName,c=e.templateEngine;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,f),this.initialized=!1,this.template=null,this.wrapper=r,this.type=n,this.name=o,this.templateName=i,this.templateEngine=c,this.onFilterItemClick=function(){}},[{key:"init",value:function(){u(f,this,d).call(this)}},{key:"render",value:function(){return this.template?(this.element=(0,o.default)({templateEngine:this.templateEngine,template:this.template,data:{name:this.name}}),u(f,this,h).call(this),this.element):null}}])}();function d(){this.template||(this.template=(0,i.default)(this.wrapper,this.templateName))}function m(){var t=this.element.dataset.openedClassname;this.element.classList.toggle(t),this.onFilterItemClick()}function h(){var t=this.element.querySelector(".js-filter-item-name");t&&t.addEventListener("click",u(f,this,m).bind(this,t))}e.default=p},"../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/categories-filter-item.js":function(t,e,r){"use strict";(function(t){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=f(r("../client/shared/components/category-tree-picker/utils/sort-categories-with-nested.js")),i=r("../client/editor-next/src/components/block-components/ecommerce/store-products/utils/index.js"),c=f(r("../client/editor-next/src/utils/view/create-element-from-template.js")),a=f(r("../client/editor-next/src/utils/view/get-template.js")),s=f(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/base-filter-item.js")),l=r("../client/editor-next/src/components/block-components/ecommerce/components/filters/constants.js"),u=r("../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/index.js");function f(t){return t&&t.__esModule?t:{default:t}}function p(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function h(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function y(t,e,r){return e=b(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],b(t).constructor):e.apply(t,r))}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(null,arguments)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var w=function(e){function r(e){var n,c=e.wrapper,s=e.type,u=e.name,f=e.categories,d=e.onSelect,m=e.categorySlugIds,h=e.templateEngine;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=y(this,r,[{wrapper:c,type:s,name:u,templateName:"filter-item",templateEngine:h}])).categories=[l.ALL_CATEGORY].concat(p(t.pipe((0,i.filterCategoriesBySlugIdWithParents)(m),i.transformCategoriesToTree,o.default)(f))),n.categoriesListTemplate=(0,a.default)(n.wrapper,"categories-list"),n.categoriesListItemTemplate=(0,a.default)(n.wrapper,"categories-list-item"),n.onSelect=d,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(r,s.default),function(t,e,r){return e&&m(t.prototype,e),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(r,[{key:"init",value:function(){this.initialized||(v(b(r.prototype),"init",this).call(this),this.initialized=!0)}},{key:"renderCategoriesList",value:function(){return(0,c.default)({templateEngine:this.templateEngine,template:this.categoriesListTemplate})}},{key:"renderCategoriesListItem",value:function(t){return(0,c.default)({templateEngine:this.templateEngine,template:this.categoriesListItemTemplate,data:{name:t}})}},{key:"attachCategoriesListItemsEvents",value:function(t,e){var r=this,n=t.querySelector(".js-category-name"),o=t.querySelector(".js-category-open-icon"),i=t.dataset.activeClassname,c=t.dataset.openedClassname,a=function(t){t.querySelectorAll(".".concat(c)).forEach(function(t){return t.classList.remove(c)})};this.onFilterItemClick=a.bind(this,this.element),n.addEventListener("click",function(){var n=t.classList.contains(c);t.classList.contains(i)||(r.element.querySelectorAll(".".concat(i)).forEach(function(t){return t.classList.remove(i)}),n||t.classList.add(c),r.onSelect({categoryIdsOrAll:e.id===l.ALL_CATEGORY.id?l.ALL_CATEGORY.id:[e.id].concat(p((0,u.getSubCategoriesIds)(e.children)))}),t.classList.add(i))}),o.addEventListener("click",function(){t.classList.contains(c)&&a(t),t.classList.toggle(c)})}},{key:"renderCategoriesTree",value:function(){var t=this,e=this.renderCategoriesList();return e.append.apply(e,p(function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return r.reduce(function(r,o){var i,c=t.renderCategoriesListItem(o.name),a=c.dataset.activeClassname;if(o.id===l.ALL_CATEGORY.id&&c.classList.add(a),t.attachCategoriesListItemsEvents(c,o),null!==o&&void 0!==o&&null!==(i=o.children)&&void 0!==i&&i.length){var s=t.renderCategoriesList();s.style.marginLeft="".concat(n*l.CATEGORIES_LEVEL_INDENT,"px");var u=e(o.children,n+1),f=c.dataset.hasChildrenClassname;c.classList.add(f),s.append.apply(s,p(u)),c.append(s)}return r.push(c),r},[])}(this.categories))),e}},{key:"render",value:function(){if(this.categories.length<=1)return null;this.element=v(b(r.prototype),"render",this).call(this);var t=this.element.querySelector(".js-filter-item-content");return t?(t.append(this.renderCategoriesTree()),this.element):null}}])}();e.default=w}).call(this,r("../client/node_modules/lodash/fp.js"))},"../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/filter-items-factory.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/title-filter-item.js")),o=c(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/categories-filter-item.js")),i=c(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/options-filter-items.js"));function c(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){switch(t){case"title":return n.default;case"category":return o.default;case"product-option":return i.default;default:return null}}},"../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/index.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}});var n=function(t){return t&&t.__esModule?t:{default:t}}(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/filter-items-factory.js"))},"../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/options-filter-items.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(r("../client/editor-next/src/utils/view/create-element-from-template.js")),o=c(r("../client/editor-next/src/utils/view/get-template.js")),i=c(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/base-filter-item.js"));function c(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e,r){return e=f(e),function(t,e){if(e&&("object"==h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],f(t).constructor):e.apply(t,r))}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(null,arguments)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function m(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function h(t){"@babel/helpers - typeof";return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function b(t,e,r){return e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(e)?e:e+""}var w=function(){return b(function e(r){y(this,e),this.state=t.cloneDeep(r)},[{key:"getState",value:function(){return this.state}}])}(),j=new WeakSet,O=function(t){function e(t){var r,n=t.wrapper,i=t.name,c=t.type,a=t.values,s=t.onSelect,u=t.templateEngine;return y(this,e),d(r=l(this,e,[{wrapper:n,name:i,type:c,templateName:"filter-item",templateEngine:u}]),j),r.values=a,r.checkedValues=[],r.onSelect=s,r.pickersListTemplate=(0,o.default)(r.wrapper,"option-type-list"),r.pickerItemTemplate=(0,o.default)(r.wrapper,"option-type-item"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(e,i.default),b(e,[{key:"init",value:function(){this.initialized||(u(f(e.prototype),"init",this).call(this),this.initialized=!0)}},{key:"update",value:function(t){var e=t.name,r=t.value,n=t.checked;e===this.name&&(n?m(j,this,S).call(this,{value:r}):m(j,this,P).call(this,{value:r}))}},{key:"getAppliedCount",value:function(){return this.checkedValues.length}},{key:"getState",value:function(){return{type:this.type,name:this.name,values:this.checkedValues}}},{key:"close",value:function(){if(this.element instanceof HTMLElement){var t=this.element.dataset.openedClassname;this.element.classList.remove(t)}}},{key:"backup",value:function(){this.memento=new w({checkedValues:this.checkedValues})}},{key:"restore",value:function(){var t=this;if(this.memento){this.reset(),this.checkedValues=this.memento.getState().checkedValues;var e=this.element.querySelectorAll(".js-filter-checkbox"),r=e[0].dataset.checkedClassname;e.forEach(function(e){t.checkedValues.includes(e.parentElement.dataset.value)&&e.classList.add(r)}),this.memento=null}}},{key:"reset",value:function(){var t=this.element.querySelectorAll(".js-filter-checkbox"),e=t[0].dataset.checkedClassname;t.forEach(function(t){t.classList.remove(e)}),this.checkedValues=[]}},{key:"attachPickerItemEvent",value:function(t){var e=this,r=t.querySelector(".js-filter-checkbox"),n=r.dataset.checkedClassname;t.addEventListener("click",function(){var o=r.classList.contains(n);e.update({name:e.name,value:t.dataset.value,checked:!o});var i={name:e.name,value:t.dataset.value,checked:!o};e.onSelect(i)})}},{key:"renderPickersList",value:function(){return(0,n.default)({templateEngine:this.templateEngine,template:this.pickersListTemplate})}},{key:"renderPickerItem",value:function(t){return(0,n.default)({templateEngine:this.templateEngine,template:this.pickerItemTemplate,data:{name:t}})}},{key:"renderOptions",value:function(){var t=this,e=this.renderPickersList(),r=this.values.reduce(function(e,r){var n=r.name,o=t.renderPickerItem(n);return o.dataset.value=n,t.attachPickerItemEvent(o),e.push(o),e},[]);return e.append.apply(e,a(r)),e}},{key:"render",value:function(){var t;if((null===(t=this.values)||void 0===t?void 0:t.length)<1)return null;var r=u(f(e.prototype),"render",this).call(this),n=r.dataset.openedClassname,o=r.querySelector(".js-filter-item-content");return o?(o.append(this.renderOptions()),r.classList.remove(n),r):null}}])}();function E(t){var e=t.value,r=this.element.querySelector('[data-value="'.concat(e,'"] .js-filter-checkbox'));return r instanceof HTMLElement?{checkbox:r,checkedClassname:r.dataset.checkedClassname}:{}}function S(t){var e=t.value,r=CSS.escape(e),n=m(j,this,E).call(this,{value:r}),o=n.checkbox,i=n.checkedClassname;o&&(o.classList.add(i),this.checkedValues.push(r))}function P(t){var e=t.value,r=CSS.escape(e),n=m(j,this,E).call(this,{value:r}),o=n.checkbox,i=n.checkedClassname;o&&(o.classList.remove(i),this.checkedValues=this.checkedValues.filter(function(t){return t!==r}))}e.default=O}).call(this,r("../client/node_modules/lodash/fp.js"))},"../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/title-filter-item.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(t){return t&&t.__esModule?t:{default:t}}(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/base-filter-item.js"));function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function c(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function a(t,e,r){return e=l(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],l(t).constructor):e.apply(t,r))}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(null,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t){var r=t.wrapper,n=t.type,o=t.name,i=t.templateEngine;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,[{wrapper:r,type:n,name:o,templateName:"title-filter-item",templateEngine:i}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,o.default),function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.initialized||(s(l(e.prototype),"init",this).call(this),this.initialized=!0)}}])}();e.default=f},"../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filters-modal.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=c(r("../client/editor-next/src/utils/view/create-element-from-template.js")),i=c(r("../client/editor-next/src/utils/view/get-template.js"));function c(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function l(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function u(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var f=new WeakSet,p=function(){return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){var r=e.wrapper,n=e.templateEngine,o=e.onDestroy,i=e.onClearAll,c=e.onApply;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,f),this.initialized=!1,this.wrapper=r,this.templateEngine=n,this.onDestroy=o,this.onClearAll=i,this.onApply=c},[{key:"init",value:function(){var t,e;this.initialized||(this.template=(0,i.default)(this.wrapper,"filters-modal"),this.textValue=null===(t=this.template.querySelector(".js-apply-filters-button"))||void 0===t?void 0:null===(e=t.dataset)||void 0===e?void 0:e.textValue)}},{key:"setContent",value:function(t){t instanceof HTMLElement&&this.element.querySelector(".js-filters-modal-inner").insertAdjacentElement("afterbegin",t)}},{key:"changeAppliedCountBy",value:function(t){this.appliedCount+=t,u(f,this,m).call(this)}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.element){var e;if(!t)null===(e=this.onDestroy)||void 0===e||e.call(this);this.element.remove(),this.element=null,this.appliedCount=0}}},{key:"handleApply",value:function(){var t;null===(t=this.onApply)||void 0===t||t.call(this),this.destroy(!0)}},{key:"setControlsVisibility",value:function(t){var e,r;if(this.element){var n=null===(e=this.element)||void 0===e?void 0:null===(r=e.dataset)||void 0===r?void 0:r.hideControlsClassname;t?this.element.classList.remove(n):this.element.classList.add(n)}}},{key:"render",value:function(t){var e=t.contentElement,r=t.appliedCount,n=t.onMount;this.template&&(this.element=(0,o.default)({templateEngine:this.templateEngine,template:this.template}),this.appliedCount=r,this.element instanceof HTMLElement&&(this.setContent(e),u(f,this,d).call(this,r),u(f,this,m).call(this),u(f,this,h).call(this),n(),document.body.append(this.element)))}}])}();function d(){this.applyButtonEl=this.element.querySelector(".js-apply-filters-button"),this.applyButtonEl instanceof HTMLElement&&(this.textValueEl=this.applyButtonEl.querySelector(".js-apply-filters-button-text"))}function m(){[this.applyButtonEl,this.textValueEl].every(function(t){return t instanceof HTMLElement})&&(this.textValueEl.textContent="".concat(this.textValue,": ").concat(this.appliedCount))}function h(){var t=this,e=this.element.querySelector(".js-filters-modal-close-button");e instanceof HTMLElement&&e.addEventListener("click",this.destroy.bind(this,!1));var r=this.element.querySelector(".js-clear-all-filters-button");r instanceof HTMLElement&&(u(f,this,m).call(this),r.addEventListener("click",function(){t.appliedCount=0,u(f,t,m).call(t),t.onClearAll()})),this.applyButtonEl instanceof HTMLElement&&this.applyButtonEl.addEventListener("click",this.handleApply.bind(this))}e.default=p},"../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filters.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=f(r("../client/editor-next/src/utils/device/view/device-detector.js")),i=f(r("../client/editor-next/src/utils/view/get-template.js")),c=f(r("../client/editor-next/src/utils/view/create-element-from-template.js")),a=f(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/view/active-filters-bar.js")),s=f(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filter-items/index.js")),l=f(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filters-modal.js")),u=f(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/filters-sidebar/utils/is-all-hidden.js"));function f(t){return t&&t.__esModule?t:{default:t}}function p(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function h(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function b(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function g(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var w={ON_CHANGE:"on-change",ON_APPLY:"on-apply"},j=new WeakSet,O=function(){return function(t,e,r){return e&&y(t.prototype,e),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){var r=e.wrapper,n=e.categories,i=e.categorySlugIds,c=e.items,a=e.templateEngine,s=e.activeFiltersBarTarget,l=e.onSelect,u=e.onBulkSelect;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,j),this.initialized=!1,this.element=null,this.itemsListElement=null,this.modalElement=null,this.wrapper=r,this.items=c,this.categories=n,this.categorySlugIds=i,this.templateEngine=a,this.itemsElements=[],this.activeFiltersBarTarget=s,this.onSelect=l,this.onBulkSelect=u,g(j,this,P).call(this,o.default.getDevice())},[{key:"init",value:function(){var t=this;this.initialized||(this.element=this.wrapper.querySelector('[data-component="filters"]'),this.element instanceof HTMLElement?(this.emptyFiltersTemplate=(0,i.default)(this.wrapper,"empty-filters"),this.itemsListElement=this.element.querySelector(".js-filters-items-list"),this.itemsListElement instanceof HTMLElement?(this.filtersModal=new l.default({wrapper:this.wrapper,templateEngine:this.templateEngine,onDestroy:function(){t.itemsElements.forEach(function(t){var e,r;null===t||void 0===t||null===(e=t.restore)||void 0===e||e.call(t),null===t||void 0===t||null===(r=t.close)||void 0===r||r.call(t),document.documentElement.classList.remove("w-overflow-hidden")})},onClearAll:function(){t.itemsElements.forEach(function(t){var e;null===t||void 0===t||null===(e=t.reset)||void 0===e||e.call(t)})},onApply:function(){var e=t.itemsElements.map(function(t){var e;return null===t||void 0===t?void 0:null===(e=t.getState)||void 0===e?void 0:e.call(t)}).filter(Boolean),r=e.map(function(t){var e=t.name;return t.values.map(function(t){return{name:e,value:t}})}).flat();t.activeFiltersBar.reset(),r.forEach(function(e){var r=e.name,n=e.value;t.activeFiltersBar.update({name:r,value:n,checked:!0})}),t.itemsElements.forEach(function(t){var e;null===t||void 0===t||null===(e=t.close)||void 0===e||e.call(t),document.documentElement.classList.remove("w-overflow-hidden")}),t.onBulkSelect(e)}}),this.filtersModal.init(),o.default.on("change",function(e){g(j,t,P).call(t,e),e===o.default.DEVICE_TYPES.DESKTOP&&(t.filtersModal.destroy(),t.element.append(t.itemsListElement))}),this.openModalButton=this.element.querySelector(".js-open-filters-modal-button"),this.openModalButton instanceof HTMLElement&&this.openModalButton.addEventListener("click",function(){t.itemsElements.forEach(function(t){var e;null===t||void 0===t||null===(e=t.backup)||void 0===e||e.call(t)});var e=t.itemsElements.map(function(t){var e,r;return null!==(e=null===t||void 0===t?void 0:null===(r=t.getAppliedCount)||void 0===r?void 0:r.call(t))&&void 0!==e?e:0}).reduce(function(t,e){return t+e},0);t.filtersModal.render({contentElement:t.itemsListElement,appliedCount:e,onMount:function(){document.documentElement.classList.add("w-overflow-hidden")}}),t.filtersModal.setControlsVisibility(!(0,u.default)(t.items))}),this.items.forEach(function(e){if(!e.hidden){var r=e.type,n=(0,s.default)(r);if(n){var o=new n(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach(function(e){h(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({wrapper:t.element,templateEngine:t.templateEngine,categories:t.categories,categorySlugIds:t.categorySlugIds,onSelect:g(j,t,E).bind(t,r)},e));o.init(),t.itemsElements.push(o)}else console.error("FilterItem ".concat(r," not found"))}}),this.activeFiltersBar=new a.default({wrapper:this.element,templateEngine:this.templateEngine,targetElement:this.activeFiltersBarTarget,onSelect:g(j,this,E).bind(this,"filters-bar")}),this.activeFiltersBar.init(),this.render(),g(j,this,S).call(this),this.initialized=!0):console.error("Filters list element is not found")):console.error("Filters element is not found"))}},{key:"render",value:function(){var t;if(this.itemsListElement.innerHTML="",(0,u.default)(this.items)){var e=(0,c.default)({templateEngine:this.templateEngine,template:this.emptyFiltersTemplate});return this.filtersModal.setControlsVisibility(!1),void this.itemsListElement.append(e)}(t=this.itemsListElement).append.apply(t,p(this.itemsElements.map(function(t){return t.render()}).filter(Boolean)))}}])}();function E(t,e){switch(t){case"filters-bar":var r=e.name,n=e.value,o=e.checked;"reset"===e.action?this.itemsElements.forEach(function(t){var e;null===t||void 0===t||null===(e=t.reset)||void 0===e||e.call(t)}):this.itemsElements.forEach(function(t){var e;null===t||void 0===t||null===(e=t.update)||void 0===e||e.call(t,{name:r,value:n,checked:o})}),this.onSelect("product-option",e);break;case"product-option":var i=e.name,c=e.value,a=e.checked;this.mode===w.ON_CHANGE?(this.activeFiltersBar.update({name:i,value:c,checked:a}),this.onSelect(t,e)):this.filtersModal.changeAppliedCountBy(a?1:-1);break;default:this.onSelect(t,e)}}function S(){this.element.querySelectorAll("template").forEach(function(t){t.remove()})}function P(t){this.mode=o.default.DEVICE_TYPES.DESKTOP===t?w.ON_CHANGE:w.ON_APPLY}e.default=O},"../client/editor-next/src/components/block-components/ecommerce/store-products/utils/filter-categories-by-slug-id-with-parents.js":function(t,e,r){"use strict";(function(t){function r(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t.curry(function(e,n){if(t.isEmpty(e))return n;var o=n.reduce(function(t,n){var o=n.path,i=n.slug_id,c=n.id;return e.includes(i)&&t.push.apply(t,[c].concat(r(o.split("/")))),t},[]);return n.filter(function(t){var e=t.id;return o.includes(e)})});e.default=o}).call(this,r("../client/node_modules/lodash/fp.js"))},"../client/editor-next/src/components/block-components/ecommerce/store-products/utils/index.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"filterCategoriesBySlugIdWithParents",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"transformCategoriesToTree",{enumerable:!0,get:function(){return o.default}});var n=i(r("../client/editor-next/src/components/block-components/ecommerce/store-products/utils/filter-categories-by-slug-id-with-parents.js")),o=i(r("../client/editor-next/src/components/block-components/ecommerce/store-products/utils/transform-categories-to-tree.js"));function i(t){return t&&t.__esModule?t:{default:t}}},"../client/editor-next/src/components/block-components/ecommerce/store-products/utils/transform-categories-to-tree.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){c(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){var e=t.reduce(function(t,e){return i(i({},t),{},c({},e.id,i(i({},e),{},{level:e.path?e.path.split("/").length:0,children:[]})))},{});return t.reduce(function(t,r){if(r.path){var n=r.path.split("/"),o=n[n.length-1],i=e[o];i&&i.children.push(e[r.id])}else t.push(e[r.id]);return t},[])}},"../client/editor-next/src/components/block-components/ecommerce/store-products/view/index.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}});var n=function(t){return t&&t.__esModule?t:{default:t}}(r("../client/editor-next/src/components/block-components/ecommerce/store-products/view/store-products.js"))},"../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/base-paginator.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=function(){return function(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){var r=e.templateEngine,n=e.renderProductsElements,o=e.loadProducts,i=e.targetElement,c=e.wrapper,a=e.productsCount,s=e.total;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialized=!1,this.templateEngine=r,this.productsCount=a,this.total=s,this.targetElement=i,this.wrapper=c,this.loadProducts=o,this.renderProductsElements=n},[{key:"renderPagination",value:function(){var t=this.wrapper.querySelector('[data-template="pagination"]').innerHTML,e=this.wrapper.querySelector(".js-products-list-container"),r=this.templateEngine.render(t),n=(new DOMParser).parseFromString(r,"text/html").body.firstChild;return this.element=n,e.insertAdjacentElement("beforeEnd",this.element),this.element}}])}();e.default=c},"../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/index.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}});var n=function(t){return t&&t.__esModule?t:{default:t}}(r("../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/paginator-factory.js"))},"../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/load-more-paginator.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(t){return t&&t.__esModule?t:{default:t}}(r("../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/base-paginator.js"));function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,c=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,i=Object.create(o.prototype),a=new I(n||[]);return c(i,"_invoke",{value:_(t,r,a)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",b={};function g(){}function w(){}function j(){}var O={};f(O,s,function(){return this});var E=Object.getPrototypeOf,S=E&&E(E(M([])));S&&S!==r&&o.call(S,s)&&(O=S);var P=j.prototype=g.prototype=Object.create(O);function k(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){function r(i,c,a,s){var l=d(t[i],t,c);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==n(f)&&o.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(f).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,s)})}s(l.arg)}var i;c(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=m;return function(i,c){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw c;return{value:t,done:!0}}for(n.method=i,n.arg=c;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===b)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var c=i.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,c=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}throw new TypeError(n(e)+" is not iterable")}return w.prototype=j,c(P,"constructor",{value:j,configurable:!0}),c(j,"constructor",{value:w,configurable:!0}),w.displayName=f(j,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,j):(t.__proto__=j,f(t,u,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},k(x.prototype),f(x.prototype,l,function(){return this}),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var c=new x(p(t,r,n,o),i);return e.isGeneratorFunction(r)?c:c.next().then(function(t){return t.done?t.value:c.next()})},k(P),f(P,u,"Generator"),f(P,s,function(){return this}),f(P,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],a=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var s=o.call(c,"catchLoc"),l=o.call(c,"finallyLoc");if(s&&l){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(s){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function c(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e,r,n,o,i,c){try{var a=t[i](c),s=a.value}catch(t){return void r(t)}a.done?e(s):Promise.resolve(s).then(n,o)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function f(t,e,r){return e=p(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],p(t).constructor):e.apply(t,r))}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function h(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var y=new WeakSet,v=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return m(t=f(this,e,[].concat(n)),y),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(e,o.default),function(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"init",value:function(){this.initialized||(h(y,this,O).call(this),this.initialized=!0)}},{key:"update",value:function(t){var e=t.total,r=t.productsCount;this.handleLoadMore&&this.loadMoreButton.removeEventListener("click",this.handleLoadMore),this.element&&this.element.remove(),this.total=e,this.productsCount=r,h(y,this,O).call(this)}}])}();function b(){this.handleLoadMore=h(y,this,g).bind(this),this.loadMoreButton.addEventListener("click",this.handleLoadMore)}function g(t){return w.apply(this,arguments)}function w(){return(w=function(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function c(t){s(i,n,o,c,a,"next",t)}function a(t){s(i,n,o,c,a,"throw",t)}c(void 0)})}}(i().mark(function t(e){var r,n;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),!this.isLoading){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,this.isLoading=!0,t.next=7,this.loadProducts({skip:this.productsCount});case 7:r=t.sent,n=r.products,this.productsCount+=n.length,h(y,this,j).call(this,{products:n}),this.productsCount>=this.total&&(this.loadMoreButton.removeEventListener("click",h(y,this,g)),this.element.remove()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),console.error(t.t0);case 17:return t.prev=17,this.isLoading=!1,t.finish(17);case 20:case"end":return t.stop()}},t,this,[[3,14,17,20]])}))).apply(this,arguments)}function j(t){var e,r=t.products;r.length&&(e=this.targetElement).append.apply(e,c(this.renderProductsElements(r)))}function O(){this.total>this.productsCount&&(this.renderPagination(),this.loadMoreButton=this.wrapper.querySelector(".js-load-more-button"),h(y,this,b).call(this))}e.default=v},"../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/null-paginator.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=function(){return function(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialized=!1},[{key:"update",value:function(){}},{key:"init",value:function(){this.initialized||(this.initialized=!0)}}])}();e.default=c},"../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/page-numbers-paginator.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(t){return t&&t.__esModule?t:{default:t}}(r("../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/base-paginator.js"));function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function c(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function a(t,e,r){return e=s(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],s(t).constructor):e.apply(t,r))}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,o.default),function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e)}();e.default=u},"../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/paginator-factory.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(r("../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/load-more-paginator.js")),o=c(r("../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/page-numbers-paginator.js")),i=c(r("../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/null-paginator.js"));function c(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){switch(t){case"load-more":return n.default;case"page-numbers":return o.default;default:return i.default}}},"../client/editor-next/src/components/block-components/ecommerce/store-products/view/store-products.js":function(t,e,r){"use strict";(function(t){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r("../client/editor-next/src/components/block-components/ecommerce/utils/prepare-app-info.js"),i=r("../client/shared/api/ecommerce/http-common.js"),c=r("../client/editor-next/src/components/block-components/constructor/types/product/view/product-previews-observer.js"),a=r("../client/editor-next/src/components/block-components/constructor/types/product/view/stock-manager.js"),s=r("../client/editor-next/src/components/block-components/constructor/types/product/view/utils.js"),l=g(r("../client/editor-next/src/utils/device/view/device-detector.js")),u=g(r("../client/editor-next/src/utils/device/get-responsive-value-prop.js")),f=g(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/view/filters.js")),p=r("../client/editor-next/src/components/block-components/ecommerce/components/filters/constants.js"),d=r("../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/index.js"),m=g(r("../client/editor-next/src/components/block-components/ecommerce/components/filters/utils/merge-options.js")),h=g(r("../client/editor-next/src/utils/view/get-template.js")),y=g(r("../client/editor-next/src/utils/view/create-element-from-template.js")),v=r("../client/editor-next/src/components/block-components/ecommerce/store-products/utils/index.js"),b=g(r("../client/editor-next/src/components/block-components/ecommerce/store-products/view/paginators/index.js"));function g(t){return t&&t.__esModule?t:{default:t}}function w(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return j(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function O(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */O=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},a=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,c=Object.create(o.prototype),a=new I(n||[]);return i(c,"_invoke",{value:_(t,r,a)}),c}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var d="suspendedStart",m="suspendedYield",h="executing",y="completed",v={};function b(){}function g(){}function w(){}var j={};u(j,a,function(){return this});var E=Object.getPrototypeOf,S=E&&E(E(M([])));S&&S!==r&&o.call(S,a)&&(j=S);var P=w.prototype=b.prototype=Object.create(j);function k(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){function r(i,c,a,s){var l=p(t[i],t,c);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==n(f)&&o.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(f).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,s)})}s(l.arg)}var c;i(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return c=c?c.then(o,o):o()}})}function _(e,r,n){var o=d;return function(i,c){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw c;return{value:t,done:!0}}for(n.method=i,n.arg=c;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=p(e,r,n);if("normal"===l.type){if(o=n.done?y:m,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var c=i.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,c=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}throw new TypeError(n(e)+" is not iterable")}return g.prototype=w,i(P,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,l,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},k(x.prototype),u(x.prototype,s,function(){return this}),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var c=new x(f(t,r,n,o),i);return e.isGeneratorFunction(r)?c:c.next().then(function(t){return t.done?t.value:c.next()})},k(P),u(P,l,"Generator"),u(P,a,function(){return this}),u(P,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],a=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var s=o.call(c,"catchLoc"),l=o.call(c,"finallyLoc");if(s&&l){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(s){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach(function(e){P(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function P(t,e,r){return(e=L(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k(t,e,r,n,o,i,c){try{var a=t[i](c),s=a.value}catch(t){return void r(t)}a.done?e(s):Promise.resolve(s).then(n,o)}function x(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function c(t){k(i,n,o,c,a,"next",t)}function a(t){k(i,n,o,c,a,"throw",t)}c(void 0)})}}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L(n.key),n)}}function L(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function T(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function C(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var I=new WeakSet,M=function(){return function(t,e,r){return e&&_(t.prototype,e),r&&_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){var r=e.element,n=e.appInstance,o=e.templateEngine;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,I),this.initialized=!1,this.templateEngine=o,this.element=r,this.appInstance=n,this.listTarget=r.querySelector(".js-product-list-wrapper"),this.paginator=(0,b.default)(),this.initialCategoryIds=[],this.value={},this.total=0,this.filters=null,this.options=new Map},[{key:"init",value:function(){var e=x(O().mark(function e(){var r,n,c,a,s,u,p,y,v,g,w,j,E,P=this;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.initialized){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.value=JSON.parse(this.element.dataset.value),s=null===(r=this.value)||void 0===r?void 0:null===(n=r.filters)||void 0===n?void 0:n.enabled,this.emptyListTemplate=(0,h.default)(this.element,"empty-list"),u=(0,b.default)(null===(c=this.value)||void 0===c?void 0:null===(a=c.pagination)||void 0===a?void 0:a.type),C(I,this,D).call(this,l.default.getDevice()),l.default.on("change",C(I,this,D).bind(this)),e.next=11,C(I,this,B).call(this);case 11:if(!s){e.next=27;break}return y=this.element.querySelector(".js-active-filters-bar-target"),v=[],g=(null===(p=this.value)||void 0===p?void 0:p.showOutOfStock)||!1,e.prev=15,e.next=18,(0,i.loadProductOptionsList)((0,o.prepareAppInfo)().apiUrl,(0,o.prepareAppInfo)().appId,this.value.categorySlugIds);case 18:v=(v=e.sent).map(function(t){return S(S({},t),{},{type:"product-option"})}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(15),console.error("Failed to load product options",e.t0);case 25:this.filters=new f.default({wrapper:this.element,items:t.pipe((0,d.filterOptions)({showOutOfStock:g}),(0,m.default)(this.value.filters.items))(v),categories:this.categories,categorySlugIds:this.value.categorySlugIds,templateEngine:this.templateEngine,activeFiltersBarTarget:y,onSelect:C(I,this,A).bind(this),onBulkSelect:function(){var t=x(O().mark(function t(e){var r,n,o;return O().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return P.options.clear(),e.forEach(function(t){var e=t.type,r=t.name,n=t.values;"product-option"===e&&P.options.set(r,{name:r,values:n})}),t.next=4,C(I,P,z).call(P);case 4:r=t.sent,n=r.products,o=r.total,P.total=o,C(I,P,q).call(P,{products:n}),P.paginator.update({total:o,productsCount:n.length});case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}),this.filters.init();case 27:return e.next=29,C(I,this,z).call(this);case 29:w=e.sent,j=w.products,E=w.total,this.total=E,this.paginator=new u({templateEngine:this.templateEngine,wrapper:this.element,targetElement:this.listTarget,loadProducts:C(I,this,z).bind(this),renderProductsElements:C(I,this,R).bind(this),productsCount:j.length,total:E}),C(I,this,q).call(this,{products:j}),this.paginator.init(),e.next=41;break;case 38:e.prev=38,e.t1=e.catch(2),console.error(e.t1);case 41:return e.prev=41,this.initialized=!0,e.finish(41);case 44:case"end":return e.stop()}},e,this,[[2,38,41,44],[15,22]])}));return function(){return e.apply(this,arguments)}}()}])}();function A(t,e){return N.apply(this,arguments)}function N(){return(N=x(O().mark(function t(e,r){var n,o,i,c,a,s,l,u;return O().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"category"===e&&(n=r.categoryIdsOrAll,this.categoryIds=n===p.ALL_CATEGORY.id?this.initialCategoryIds:n),"product-option"===e&&(o=r.name,i=r.value,c=r.checked,"reset"===r.action?this.options.clear():!this.options.has(o)&&c?this.options.set(o,{name:o,values:[i]}):(a=this.options.get(o),c?this.options.set(o,{name:o,values:[].concat(w(a.values),[i])}):(this.options.set(o,{name:o,values:a.values.filter(function(t){return t!==i})}),this.options.get(o).values.length||this.options.delete(o)))),t.next=4,C(I,this,z).call(this);case 4:s=t.sent,l=s.products,u=s.total,this.total=u,this.paginator.update({total:u,productsCount:l.length}),C(I,this,q).call(this,{products:l});case 10:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function D(t){var e=(0,u.default)(t,["itemsPerRow"],this.value),r=(0,u.default)(t,["pagination","rows"],this.value);this.limit=e*r}function B(){return G.apply(this,arguments)}function G(){return(G=x(O().mark(function e(){var r,n,c,a,s,l,u,f,p,d,m,h;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(0,o.prepareAppInfo)(),l=s.appId,u=s.apiUrl,null===this||void 0===this||null===(r=this.value)||void 0===r||null===(n=r.filters)||void 0===n||!n.enabled){e.next=9;break}return e.next=4,(0,i.loadCategories)(l,u);case 4:return d=e.sent,this.categories=d,null!==(f=this.value)&&void 0!==f&&null!==(p=f.categorySlugIds)&&void 0!==p&&p.length&&(this.initialCategoryIds=t.pipe((0,v.filterCategoriesBySlugIdWithParents)(null===(m=this.value)||void 0===m?void 0:m.categorySlugIds),t.map(t.prop("id")))(this.categories)),this.categoryIds=this.initialCategoryIds,e.abrupt("return");case 9:if(null!==(c=this.value)&&void 0!==c&&null!==(a=c.categorySlugIds)&&void 0!==a&&a.length){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,(0,i.loadCategories)(l,u,this.value.categorySlugIds);case 13:h=e.sent,this.categories=h,this.initialCategoryIds=h.map(t.prop("id")),this.categoryIds=this.initialCategoryIds;case 17:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function z(){return F.apply(this,arguments)}function F(){return(F=x(O().mark(function t(){var e,r,n,l,u,f,p,d,m,h,y,v,b=this,g=arguments;return O().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=g.length>0&&void 0!==g[0]?g[0]:{},r=e.skip,n=void 0===r?0:r,l=(0,o.prepareAppInfo)(),u=l.appId,f=l.apiUrl,p=this.value,d=p.showOutOfStock,m=p.sort,t.next=5,(0,i.loadCategoryProducts)(u,f,{categories:this.categoryIds,options:Array.from(this.options.values()),showOutOfStock:d,limit:this.limit,sort:m,skip:n});case 5:return h=t.sent,y=h.products,v=h.products_total,(0,c.updatePreviewsMap)(y),y.forEach(a.updateStockWithVariantsInventory),t.abrupt("return",{products:y.map(function(t){return(0,s.mapProduct)({appInstance:b.appInstance},t)}),total:v});case 11:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function R(e){var r=this.element.querySelector('[data-template="products-list"]').innerHTML;if(!r)throw new Error("Template not found");var n=this.templateEngine.render(r,{products:e,ribbons:t.getOr({},"meta_data.ribbons",this.appInstance)}),o=(new DOMParser).parseFromString(n,"text/html").body.children;return Array.from(o).forEach(function(t){return c.productPreviewsObserver.observe(t)}),o}function q(t){var e,r=t.products;this.listTarget.innerHTML="",this.emptyListElement instanceof HTMLElement&&(this.emptyListElement.remove(),this.emptyListElement=null),r.length||(this.emptyListElement=(0,y.default)({templateEngine:this.templateEngine,template:this.emptyListTemplate}),this.listTarget.insertAdjacentElement("afterend",this.emptyListElement)),this.listTarget.innerHTML="",(e=this.listTarget).append.apply(e,w(C(I,this,R).call(this,r)))}e.default=M}).call(this,r("../client/node_modules/lodash/fp.js"))},"../client/editor-next/src/components/block-components/ecommerce/utils/generate-preview-sizes.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){c(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.generatePreviewSizes=void 0;var a=["original",72,112,144,224,480,700];e.generatePreviewSizes=function(t){return t?a.reduce(function(e,r){return i(i({},e),{},c({},r,"".concat(t,"/").concat(r)))},{}):{}}},"../client/editor-next/src/utils/device/view/device-detector.js":function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(r("./node_modules/events/events.js")),i=r("../client/shared/constants/device-types.js"),c=a(r("../client/editor-next/src/utils/device/get-device-by-window-size.js"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function u(t,e,r){return e=f(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],f(t).constructor):e.apply(t,r))}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=u(this,e)).device=(0,c.default)(),t.DEVICE_TYPES=i.DEVICE_TYPES,t.attachEventListeners(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(e,o.default),function(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"attachEventListeners",value:function(){window.addEventListener("resize",this.handleResize.bind(this))}},{key:"handleResize",value:function(){var t=(0,c.default)();t!==this.device&&(this.device=t,this.emit("change",this.device))}},{key:"getDevice",value:function(){return this.device}}])}();e.default=new d},"../client/editor-next/src/utils/view/create-element-from-template.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){var e=t.templateEngine,r=t.template,n=t.data,o=void 0===n?{}:n;if(!r)return null;var i=new DOMParser,c=r.outerHTML,a=e.render(c,o);return i.parseFromString(a,"text/html").body.firstChild}},"../client/editor-next/src/utils/view/get-template.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t,e){if(!t||!e)return null;var r=t.querySelector('[data-template="'.concat(e,'"]'));return r?document.importNode(r.content,!0).firstChild:(console.error("Template ".concat(e," not found")),null)}},"../client/shared/components/category-tree-picker/utils/sort-categories-with-nested.js":function(t,e,r){"use strict";(function(t){function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function i(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function e(r){return null!==r&&void 0!==r&&r.length?t.pipe(t.sortBy("sort_order"),t.map(function(t){var r;return(null===t||void 0===t?void 0:null===(r=t.children)||void 0===r?void 0:r.length)>0?o(o({},t),{},{children:e(t.children)}):t}))(r):[]}}).call(this,r("../client/node_modules/lodash/fp.js"))}}]);
